{% load humanize %}
<head>
<h4><i>CostOut</i> - the CBCSE Cost Tool Kit Â© 2015</h4>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<!--<script src="https://rawgithub.com/highslide-software/crossing-specific-value/master/crossing-specific-value.js"></script> no longer supported -->
<div id="container" style="width:90%; height:400px;margin:0 auto;"></div>
<script type="text/javascript">
var mySeries = [];                                                                       
</script> 

{% for reg in RegList %}
<script type="text/javascript">
mySeries.push([{{reg.startdate}},{{reg.countondate}}]);

$(function () {
    $('#container').highcharts({
        chart: {
            renderTo: 'container',
            type: 'spline'
        },
        title: {
            text: 'Number of Registrations'
        },
        subtitle: {
                text: 'Source: www.cbcsecosttoolkit.org'
        },
        xAxis: {
            type: 'datetime',
            min: Date.UTC(2015, 5, 1), 
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            },
        },
        yAxis: {
            title: {
                text: 'Number of Registrations'
            },
            min : 0
        },
        plotOptions: {
            spline: {
                marker: {
                    enabled: true
                }
            }
        },
       series:[{
         name: 'Registration Date',
         data: mySeries
     }] 
    });
});

</script>
{% endfor %}
