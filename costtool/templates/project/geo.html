{% extends 'index.html' %}
{% load static %}
{% block body_block %}

 <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){                                                           
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
               m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70024304-1', 'auto');
      ga('send', 'pageview');
 </script>
<div class="hero-unit">
    <div class="table-responsive">
        <h2 class="form-signin-heading">Edit geographical indices for {{projname}}</h2>
        <h4> Source of default geographical indices:
            <br> <br>Aten, B. H., Figueroa, E. B., & Martin, T. M. (2012). Regional price parities for states and metropolitan areas, 2006-2010. Survey of current business (August 2012), pp. 229-242. URL: <a href="https://apps.bea.gov/scb/pdf/2012/08%20August/0812_regional_price_parities.pdf" target="_blank">https://apps.bea.gov/scb/pdf/2012/08%20August/0812_regional_price_parities.pdf</a>
        <br> <br>National price level (all states, all areas)  is set at 100. </h4>
        <h4> If you edit the default geographical indices they will be stored and used for this project only. </h4>
        <form method="post" id="geoform" enctype="multipart/form-data">
        <br><input class="btn btn-primary" type="button" name="goto" value="Restore default geographical indices" onclick="PasstoView()">
        <input class="btn btn-primary" type="submit" name="submit" value="Save">
        <input class="btn btn-success" type="button" name="button" value="Back to Indices" onclick="cancelout()">
        <input class="btn btn-warning" type="button" name="exp" value="Export to Excel" onclick="exptoexcel()">
        <table>
        <thead>
           <tr>
              <th>State</th>
              <th>Area</th>
              <th>Index</th>
           </tr>
        </thead>
        <tbody class="product-instances">
             {% csrf_token %}
             {{ geoform.management_form }}
             <br><b><font color="red">{{ errtext }} </font></b><br>
             {% for form in geoform %}
              {{ form.non_field_errors }}
              {{ form.errors }}
              {{ form.id }}
             <tr>
                <td>{{ form.stateIndex }}</td>
                <td>{{ form.areaIndex }}</td>
                <td>{{ form.geoIndex }}</td>
             </tr>
             {% endfor %}

        </tbody>
        </table> 
        </form>
   </div>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
   <script type="text/javascript">
       function PasstoView () {
          if (confirm('Are you sure you want to restore the Geographical Indices? If you restore the default indices, your cost analyses will be recalculated to express costs for All States, All Areas. After restoring, you can change this state and area in Project Settings.')) {
             document.location.href = "/project/restore_geo.html";
          }
       }

       function exptoexcel(){
         document.location.href = "/project/export_to_geo.html";
      }

      function cancelout() {
            document.location.href = "/project/indices.html";
      }

 
   </script>

</div>

{% endblock %}

